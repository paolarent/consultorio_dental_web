@if (mostrarModalPrincipal()) {
<div class="fixed inset-0 bg-black/70 flex justify-center items-center z-50">

    <div class="relative bg-white p-6 rounded-xl max-h-[90vh] overflow-y-auto w-[460px]">
        <div class="grid gap-0"> 
            <h2 class="text-3xl font-bold mt-2 mb-6 text-[#105053]">
                Reprogramar Cita
            </h2>

            @if(mostrarPaciente) {
                <div class="mb-4">
                    <label class="block text-base font-medium text-[#545454] mb-1">
                        Paciente
                    </label>
                    <input
                        type="text"
                        [value]="cita?.paciente"
                        class="w-full h-12 border border-[#115153] bg-[#C3F2F3B2] rounded-lg px-3 p-2"
                        readonly
                    />
                </div>
            }

            @if(mostrarServicio) {
                <div class="mb-4">
                    <label class="block text-base font-medium text-[#545454] mb-1">
                        Servicio
                    </label>
                    <input
                        type="text"
                        [value]="cita?.servicio ?? 'Sin especificar'"
                        class="w-full h-12 border border-[#115153] bg-[#C3F2F3B2] rounded-lg px-3 p-2"
                        readonly
                    />
                </div>
            }

            <div class="mb-4">
                <label class="block text-base font-medium text-[#545454] mb-1">
                    Fecha de cita actual
                </label>
                <input
                    type="text"
                    [value]="cita?.fecha | date:'yyyy-MM-dd'"
                    class="w-full h-12 border border-[#115153] bg-[#C3F2F3B2] rounded-lg px-3 p-2"
                    readonly
                />
            </div>

            <div class="mb-4">
                <label class="block text-base font-medium text-[#545454] mb-1">
                    Hora de cita actual
                </label>
                <input
                    type="text"
                    [value]="cita?.hora_inicio | date:'hh:mm a'"
                    class="w-full h-12 border border-[#115153] bg-[#C3F2F3B2] rounded-lg px-3 p-2"
                    readonly
                />
            </div>

            <!-- Fecha -->
            <div class="mb-6">
                <label class="block text-base font-medium text-[#545454] mb-1">Nueva Fecha</label>
                <input #fechaInput type="text" placeholder="Selecciona la fecha" required [(ngModel)]="fecha_nueva"
                    class="w-full h-12 border border-teal-600 bg-zinc-300/30 rounded-lg p-2 pl-3 focus:ring-2 focus:ring-[#545454] focus:outline-none" />
            </div>

            <div class="mb-6">
                <label class="block text-base font-medium text-[#545454] mb-1">Nueva Hora</label>

                <input
                    matInput
                    [ngxTimepicker]="tpInicio"
                    [(ngModel)]="hora_nueva"
                    placeholder="00:00"
                    readonly
                    class="w-full mt-1 border border-teal-600 bg-zinc-300/30 rounded-md p-3"
                />
                <ngx-material-timepicker #tpInicio></ngx-material-timepicker>
            </div>

            <!--aviso-->
            <div class="flex items-start gap-4 bg-[#C3F2F3] rounded-lg shadow-md p-4">
                <!-- Icono -->
                <div class="w-10 h-10 flex items-center justify-center">
                    <img src="/assets/icons/aviso.svg" class="w-8 h-8">
                </div>

                <!-- Texto -->
                <div>
                <span class="block text-black text-lg font-medium font-poppins capitalize tracking-wide">
                    Información importante
                </span>
                <span class="block text-neutral-600 text-base font-light font-poppins tracking-wide mt-1">
                    • La reprogramación está sujeta a confirmación del paciente
                </span>
                </div>
            </div>

            
            <div class="flex justify-end gap-4 mt-6">
                <button
                    class="px-6 py-2 bg-neutral-600 rounded-lg inline-flex justify-center items-center cursor-pointer hover:bg-[#9C9898]"
                    (click)="cancelar()"
                >
                    <span class="text-center text-white text-lg font-semibold tracking-wider">Cancelar</span>
                </button>

                <button
                    class="px-6 py-2 bg-[#1D8E92] rounded-lg inline-flex justify-center items-center cursor-pointer hover:bg-[#105053]"
                    (click)="continuar()"
                >
                    <span class="text-center text-white text-lg font-semibold tracking-wider">Continuar</span>
                </button>
            </div>

        </div>
    </div>
</div>
}

@if (mostrarConfirmacion()) {
    <app-modal-aviso-reprog
        [paciente]="cita?.paciente"
        [servicio]="cita?.servicio"
        [fecha_actual]="fecha_actual"
        [hora_actual]="hora_actual"
        [fecha_nueva]="fecha_nueva"
        [hora_nueva]="hora_nueva"
        (cancelar)="onCancelarConfirmacion()"
        (confirmar)="onConfirmar($event)"
    >
    </app-modal-aviso-reprog>
}


