<div class="fixed inset-0 bg-black/50 flex justify-center items-center z-50">

    <div class="relative bg-white p-6 rounded-xl max-h-[90vh] overflow-y-auto w-[460px]">
        <div class="grid gap-0"> 
            <h2 class="text-3xl font-bold mt-2 mb-6 text-[#105053]">
                {{ modoEdicion ? 'Editar Evento' : 'Crear Evento' }}
            </h2>

            <!-- Nombre del servicio -->
            <div class="mb-4">
                <label class="block text-base font-medium text-[#545454]">Titulo del evento</label>
                <input
                type="text"
                placeholder="Evento"
                required
                [(ngModel)]="titulo"
                class="w-full h-12 border border-teal-600 bg-zinc-300/30 rounded-lg p-2 pl-3 focus:ring-2 focus:ring-[#545454] focus:outline-none"
                />
            </div>

            <div>
                <label class="block text-base font-medium text-[#545454] mb-1">Tipo de evento</label>
                <mat-form-field appearance="outline" class="w-full">
                    <mat-select placeholder="Seleccione tipo de evento" required [(ngModel)]="id_tipo_evento">
                        @for(tipo of tiposEvento; track tipo.id_tipo_evento) {
                            <mat-option [value]="tipo.id_tipo_evento">{{ tipo.nombre }}</mat-option>
                        }
                    </mat-select>
                </mat-form-field>
            </div>

            <!-- Fecha de inicio -->
            <div class="mb-6">
                <label class="block text-base font-medium text-[#545454] mb-1">Fecha de Inicio</label>
                <input #fechaInicioInput type="text" placeholder="Selecciona fecha de inicio" required
                    [(ngModel)]="fecha_inicio"
                    class="w-full h-12 border border-teal-600 bg-zinc-300/30 rounded-lg p-2 pl-3 focus:ring-2 focus:ring-[#545454] focus:outline-none"
                />
            </div>

            <!-- Fecha de fin -->
            <div class="mb-6">
                <label class="block text-base font-medium text-[#545454] mb-1">Fecha de Fin</label>
                <input #fechaFinInput type="text" placeholder="Selecciona fecha de fin" required
                    [(ngModel)]="fecha_fin"
                    class="w-full h-12 border border-teal-600 bg-zinc-300/30 rounded-lg p-2 pl-3 focus:ring-2 focus:ring-[#545454] focus:outline-none"
                />
            </div>

            <!-- Toggle -->
            <div class="flex items-center gap-4 mt-1 mb-4">
                <label class="text-base font-medium text-[#545454]">
                    Evento de todo el dia
                </label>

                <button (click)="toggleTodoDia()" class="relative rounded-full transition">
                    @if (eventoFullDia()) {
                    <img src="assets/icons/on_switch.svg" class="w-16 h-10" />
                    } @else {
                    <img src="assets/icons/off_switch.svg" class="w-16 h-10" />
                    }
                </button>
            </div>

            <!-- INPUTS DE HORA (solo si NO es todo el dÃ­a) -->
            @if (!eventoFullDia()) {
                <div class="mb-6">
                    <label class="block text-base font-medium text-[#545454] mb-1">Hora de Inicio</label>
                    <input
                    matInput
                    [ngxTimepicker]="tpInicio"
                    [(ngModel)]="hora_inicio"
                    placeholder="00:00"
                    readonly
                    class="w-full mt-1 border border-teal-600 bg-zinc-300/30 rounded-md p-3"
                    />
                    <ngx-material-timepicker #tpInicio></ngx-material-timepicker>
                </div>

                <div class="mb-6">
                    <label class="block text-base font-medium text-[#545454] mb-1">Hora de fin</label>
                    <input
                    matInput
                    [ngxTimepicker]="tpFin"
                    [(ngModel)]="hora_fin"
                    placeholder="00:00"
                    readonly
                    class="w-full mt-1 border border-teal-600 bg-zinc-300/30 rounded-md p-3"
                    />
                    <ngx-material-timepicker #tpFin></ngx-material-timepicker>
                </div>
            }

            <!-- Notas -->
            <div class="mb-6">
                <label class="block text-base font-medium text-[#545454] mb-1">Notas</label>
                <textarea placeholder="Notas adicionales.." rows="3" [(ngModel)]="notas"
                            class="w-full border border-teal-600 bg-zinc-300/30 rounded-lg p-3 focus:ring-2 focus:ring-[#105053] focus:outline-none resize-none"></textarea>
            </div>

            <div class="flex justify-end gap-4">
                <button
                    class="px-6 py-2 bg-neutral-600 rounded-lg inline-flex justify-center items-center cursor-pointer hover:bg-[#9C9898]"
                    (click)="cancelar()"
                >
                    <span class="text-center text-white text-lg font-semibold tracking-wider">Cancelar</span>
                </button>

                <button
                    class="px-6 py-2 bg-[#1D8E92] rounded-lg inline-flex justify-center items-center cursor-pointer hover:bg-[#105053]"
                    (click)="guardarEvento()"
                >
                    <span class="text-center text-white text-lg font-semibold tracking-wider">
                        {{ modoEdicion ? 'Guardar' : 'Crear' }}
                    </span>
                </button>
            </div>

        </div>
    </div>
</div>
